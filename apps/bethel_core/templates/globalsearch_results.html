{% load static %}

<div class="col s12 m12 l12">


        <div class="row">
            <div class="col s12 m12 l12">
                <div id="group" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title activator">Visão Geral<i class="material-icons right">live_help</i></span>
                        <br/>

                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h6>Cadastrados</h6>
                            </li>

                            <li class="collection-item">
                                Usuarios : 400
                                <i class="material-icons left">accessibility</i>
                            </li>

                            <li class="collection-item">
                                Grupos : 25
                                <i class="material-icons left">group_work</i>
                            </li>

                            <li class="collection-item">
                                Reuniões de Célula : 432
                                <i class="material-icons left">event</i>
                            </li>

                            <li class="collection-item">                                                        
                                Cursos : 3
                                <i class="material-icons left">assignment_turned_in</i>
                            </li>


                        </ul>

                        {% if groups_over %}
                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h6>Supervisionado por:</h6>
                            </li>
                            {% for list in groups_over %}

                            <li class="collection-item">
                                <div>{{ list.name }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            {% endfor %}
                        </ul>

                        {% endif %} {% if group_origin %}
                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h6>Grupo de origem:</h6>
                            </li>
                            <li class="collection-item">
                                <div>{{ group_origin.name }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>
                        </ul>
                        {% endif %} {% if generated_groups %}

                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h6>Grupos que originou</h6>
                            </li>
                            {% for list in generated_groups %}

                            <li class="collection-item">
                                <div>{{ list.name }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            {% endfor %}
                        </ul>
                        {% endif %} {% if groups_under %}

                        <ul class="collection with-header">
                            <li class="collection-header">
                                <h6>Supervisionando:</h6>
                            </li>
                            {% for list in groups_under %}

                            <li class="collection-item">
                                <div>{{ list.name }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            {% endfor %}
                        </ul>
                        {% endif %}

                    </div>

                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">+ Detalhes do Grupo<i class="material-icons right">close</i></span>


                        <ul class="collection with-header">

                            <li class="collection-header">
                                <h5>Endereço</h5>
                            </li>

                            <li class="collection-item">
                                <div>CEP: {{ group_data.addr_zip }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>


                            <li class="collection-item">
                                <div>Estado: {{ group_data.addr_state }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>


                            <li class="collection-item">
                                <div>Cidade: {{ group_data.addr_city }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            <li class="collection-item">
                                <div>Bairro: {{ group_data.addr_neigh }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            <li class="collection-item">
                                <div>Logradouro: {{ group_data.addr_street }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                            <li class="collection-item">
                                <div>Nro/Complemento: {{ group_data.addr_street_number }}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>

                        </ul>



                        <ul class="collection with-header">

                            <li class="collection-header">
                                <h5>Dias e Horários</h5>
                            </li>

                            <li class="collection-item">
                                <div>Frequência de reuniões: Semanal
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </div>
                            </li>


                            <li class="collection-item">
                                <div>

                                    <!-- TODO make work -->
                                    {% for key, item in group_data.meet_day.items %}

                                    <p>{{ item.key }} : {{group_data.meet_hour.key}}</p>

                                    {% endfor %}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>

                                </div>
                            </li>

                        </ul>

                    </div>

                    <div class="card-action">

                        {% if 'w' in Groups_perm %}
                            <a href="{{ base_url }}/celula/editar/{{ cell_id }}/"  class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons">edit</i></a>
                        {% endif %}
                        {% if 'c' in Groups_perm %}
                            <a class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons activator">delete</i></a>
                        {% endif %}

                    </div>

                </div>
            </div>

        </div>


        <div class="row">
            <div class="col s12 l6">
                <div id="members-chart" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title">Frequência em reuniões</span>


                            <canvas id="mett_freq_chart" width="400" height="400"></canvas>



                    </div>

                    <div class="card-action">
                        <a id="" class="btn-floating btn-move-up waves-effect orange darken-5 right modal-trigger"><i class="material-icons activator">search</i></a>
                    </div>

                </div>
            </div>

            <div class="col s12 l6">
                <div id="next-mettings" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title">Próximas reuniões</span>


                            <ul class="collection">


                                <li class="collection-item">                                                                
                                    <div>01/16 - Agendada<a href="#!" class="secondary-content"><i class="material-icons">search</i></a></div>
                                </li>


                                <li class="collection-item">
                                    <div>12/16 - Agendada<a href="#!" class="secondary-content"><i class="material-icons">search</i></a></div>
                                </li>


                                <li class="collection-item">
                                    <div>19/16 - Agendada<a href="#!" class="secondary-content"><i class="material-icons">search</i></a></div>
                                </li>


                            </ul>



                    </div>

                    <div class="card-action">

                        {% if 'w' in Events_perm or 'w' in System_perm %}
                            <a href="{{ base_url }}/reuniaocelula/novo/{{ group_id }}/" class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons activator">add</i></a>
                        {% endif %}

                    </div>

                </div>
            </div>

        </div>


        <div class="row">
            <div class="col s12 m12 l12">
                <div id="members" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title">Membros</span>

                        <ul class="collection">

                            {% for list in member_users %}
                                
                            <li id="member-added-{{ list.user.id }}" class="collection-item avatar">
                                <div id="user-added-info-{{ list.user.id}}">
                                    {% if list.user.extra_data.profile_image %}
                                        <img class="circle" src="{% static "upload/profile_images/" %}{{ list.user.extra_data.profile_image }}">
                                    {% else %}
                                        <img class="circle" avatar="{{ list.user.extra_data.first_name }} {{ list.user.extra_data.last_name }}">
                                    {% endif %}
                                    <span class="title">{{ list.user.extra_data.first_name }} {{ list.user.extra_data.last_name }}</span> {% for roles in list.role %}
                                    <p>{{ roles.name }}</p>
                                    {%endfor%}
                                </div>

                                <div class="secondary-content">
                                
                                    <a id="confirm-delete-member-modal-trigger" href="#confirm-delete-member-modal" onclick="update_delete_modal('{{ list.user.id }}')" class="modal-trigger confirm-delete-member-modal-trigger"><i class="material-icons activator">delete</i></a>
                                    {% include "user_modals/delete_member_confirm_modal.html" %}
                                

                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class=""><i class="material-icons activator">search</i></a>
                                
                                </div>
                            </li>

                            {% endfor %}

                        </ul>

                        <ul class="collection" id="member-cell-added">
                            

                        </ul>

                        <div class="progress" id="loader-member-cell-added" style="display:none" >
                          <div class="indeterminate"></div>
                        </div>                                                   

                    </div>

                    <div class="card-action">

                        {% if 'w' in Groups_perm %}                                                    
                            <a id="member-modal-trigger" class="btn-floating btn-move-up waves-effect orange darken-5 right modal-trigger" data-target="member-modal"><i class="material-icons activator">add</i></a>
                            {% include "user_modals/add_member_search_modal.html" %}
                        {% endif %}

                    </div>

                </div>
            </div>

        </div>



        <div class="row">

            <div class="col s12 m12 l12">

                <div id="geo-member" class="card scrollspy" style="height: 550px">

                    <div class="card-content">
                        <span class="card-title">Geolocalização dos Membros</span>
                          <p id="map_show" class="valign center-align">Clique no icone <a onclick="initMap();$('#map_show').hide()" class="btn-floating waves-effect orange darken-5 "><i class="material-icons activator">map</i></a> para exibir o mapa</p>
                    </div>


                    <div id="map"></div>

                </div>


            </div>

        </div>

        <div class="row">
            <div class="col s12 m12 l12">
                    <div id="visitors" class="card scrollspy">
                        <div class="card-content">

                            <span class="card-title">Visitantes</span>

                            <ul class="collection">

                                {% for list in visitor_users %}

                                <li class="collection-item avatar">
                                    <img class="circle" width="60" height="60" avatar="{{ list.user.extra_data.first_name }} {{ list.user.extra_data.last_name }}">
                                    <span class="title">{{ list.user.extra_data.first_name }} {{ list.user.extra_data.last_name }}</span> {% for roles in list.role %}
                                    <p>{{ roles.name }}</p>
                                    {%endfor%}
                                    <a href="{{ base_url }}/usuario/get/{{ list.user.id }}" class="secondary-content"></a>
                                </li>

                                {% endfor %}

                            </ul>

                        </div>


                        <div class="card-action">

                            {% if 'w' in Groups_perm %}
                                <a class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons activator">add</i></a>
                            {% endif %}

                        </div>

                    </div>
            </div>

        </div>


        <div class="row">
            <div class="col s12 m12 l12">
                <div id="mettings" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title">Reuniões de Células</span>
                        <p>{{ meetings.count }} Reunião(ões)</p>
                        <p></p>


                        <ul class="collection">
                            {% for item in meetings %}
                            <li class="collection-item">
                                <div>{{ item.name }}<a href="{{ base_url }}/reuniaocelula/get/{{ item.id }}/" class="secondary-content"><i class="material-icons">send</i></a>
                                </div>
                            </li>
                            {% endfor %}

                        </ul>

                    </div>


                    <div class="card-action">

                        {% if 'w' in Events_perm or 'w' in System_perm %}
                            <a href="{{ base_url }}/reuniaocelula/novo/{{ group_id }}/" class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons activator">add</i></a>
                        {% endif %}

                    </div>

                </div>
            </div>

        </div>


        <div class="row">
            <div class="col s12 m12 l12">
                <div id="events" class="card scrollspy">
                    <div class="card-content">

                        <span class="card-title">Eventos do Grupo</span>
                        <p>{{ events.count }} Evento(s)</p>
                        <p></p>


                        <ul class="collection">
                            {% for item in events %}
                            <li class="collection-item">
                                <div>{{ item.name }}<a href="{{ base_url }}/evento/get/{{ item.id }}/" class="secondary-content"><i class="material-icons">send</i></a>
                                </div>
                            </li>
                            {% endfor %}

                        </ul>

                    </div>



                    <div class="card-action">

                        {% if 'w' in Events_perm %}
                            <a class="btn-floating btn-move-up waves-effect orange darken-5 right"><i class="material-icons activator">add</i></a>
                        {% endif %}

                    </div>

                </div>
            </div>

        </div>

</div>